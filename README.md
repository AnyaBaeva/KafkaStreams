# Message Filter Application

Kafka Streams приложение для фильтрации сообщений на основе:
- Списка заблокированных пользователей
- Списка запрещенных слов

## Архитектура приложения

### Основные компоненты

1. **Message** - класс сообщения:
   - `text`: текст сообщения
   - `receiver`: получатель сообщения

2. **MessageSerdes** - сериализатор/десериализатор для класса Message (JSON формат)

3. **MessageFilterApp** - основной класс приложения:
   - Создает Kafka Streams топологию
   - Управляет жизненным циклом приложения
   - Отправляет тестовые данные

4. **MessageFilterProcessor** - процессор для фильтрации запрещенных слов

### Логика работы

1. Получение сообщений из топика `messages`
2. Фильтрация сообщений от заблокированных пользователей (join с `blocked-users`)
3. Фильтрация сообщений с запрещенными словами (использование `forbidden-words`)
4. Запись отфильтрованных сообщений в топик `filtered-messages`

## Инструкция по запуску

### Требования
- Java 11+
- Apache Kafka 2.8+
- Maven 3.6+

### 1. Запуск инфраструктуры через Docker Compose

```bash
# Запуск Kafka и Zookeeper
docker-compose up -d

# Проверка работы контейнеров
docker-compose ps
```

## Как проверить

Запустить приложение со встроенными примерами.

#### Информация по заблокированным пользователям:
"user1:user2", "blocked" //blocked by user-1
"user1:user3", "blocked" //blocked by user-1
"user2:user4", "blocked" //blocked by user-2

#### Информация по запрещенным словам:
"black", "yes" //запрещенное слово
"red", "yes" //запрещенное слово
"gray", "yes" //запрещенное слово
"blue", "no" //НЕ запрещенное слово

#### Результат:
"user4" - > ("blue", "user1"); //будет отправлено
"user2" - > ("yellow", "user1")); //не будет отправлено, т.к. User1 зблокировал User2
"user3" - > ("red", "user1")); //не будет отправлено, т.к. User1 зблокировал User3
"user5" - >  "black night", "user1")); //будет отправлено, но будет замаскмровано слово "black"


